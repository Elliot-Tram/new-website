---
import { Image } from 'astro:assets';
import type { ImageMetadata } from 'astro';
import FormattedDate from './FormattedDate.astro';

interface Props {
	title: string;
	description?: string;
	pubDate: Date;
	heroImage?: ImageMetadata;
	href: string;
	category?: string;
	featured?: boolean;
}

const { title, description, pubDate, heroImage, href, category, featured = false } = Astro.props;
---

<article class={`blog-card ${featured ? 'featured' : ''}`}>
	<a href={href} class="card-link">
		{heroImage && (
			<div class="card-image">
				<Image 
					src={heroImage} 
					alt={title}
					width={featured ? 1200 : 600}
					height={featured ? 600 : 400}
					loading="lazy"
				/>
			</div>
		)}
		<div class="card-content">
			{category && <span class="card-category">{category}</span>}
			<h3 class="card-title">{title}</h3>
			{description && <p class="card-description">{description}</p>}
			<div class="card-meta">
				<FormattedDate date={pubDate} />
			</div>
		</div>
	</a>
</article>

<style>
	.blog-card {
		background: var(--bg-primary);
		border: 1px solid var(--border-color);
		border-radius: 16px;
		overflow: hidden;
		transition: all 0.3s ease;
		height: 100%;
		display: flex;
		flex-direction: column;
	}

	.blog-card:hover {
		border-color: var(--accent);
		box-shadow: var(--shadow-lg);
		transform: translateY(-4px);
	}

	.card-link {
		display: flex;
		flex-direction: column;
		height: 100%;
		text-decoration: none;
		color: inherit;
	}

	.card-image {
		width: 100%;
		overflow: hidden;
		background: var(--bg-secondary);
		aspect-ratio: 16 / 9;
	}

	.card-image img {
		width: 100%;
		height: 100%;
		object-fit: cover;
		transition: transform 0.3s ease;
		border-radius: 0;
	}

	.blog-card:hover .card-image img {
		transform: scale(1.05);
	}

	.card-content {
		padding: 1.5rem;
		flex: 1;
		display: flex;
		flex-direction: column;
		gap: 0.75rem;
	}

	.card-category {
		display: inline-block;
		padding: 0.375rem 0.75rem;
		background: var(--accent-light);
		color: var(--accent);
		border-radius: 6px;
		font-size: 0.875rem;
		font-weight: 600;
		text-transform: uppercase;
		letter-spacing: 0.05em;
		width: fit-content;
	}

	:global([data-theme="dark"]) .card-category {
		background: var(--accent-light);
		color: var(--accent-hover);
	}

	.card-title {
		font-size: 1.25rem;
		font-weight: 700;
		line-height: 1.3;
		margin: 0;
		color: var(--text-primary);
		transition: color 0.2s ease;
	}

	.blog-card:hover .card-title {
		color: var(--accent);
	}

	.card-description {
		font-size: 0.9375rem;
		line-height: 1.6;
		color: var(--text-secondary);
		margin: 0;
		flex: 1;
	}

	.card-meta {
		font-size: 0.875rem;
		color: var(--text-muted);
		padding-top: 0.5rem;
		border-top: 1px solid var(--border-light);
	}

	/* Featured card styles */
	.featured {
		grid-column: 1 / -1;
	}

	.featured .card-link {
		flex-direction: row;
		gap: 2rem;
	}

	.featured .card-image {
		width: 50%;
		aspect-ratio: 16 / 10;
	}

	.featured .card-content {
		width: 50%;
		padding: 2rem;
	}

	.featured .card-title {
		font-size: 2rem;
	}

	.featured .card-description {
		font-size: 1.125rem;
	}

	@media (max-width: 768px) {
		.featured .card-link {
			flex-direction: column;
		}

		.featured .card-image,
		.featured .card-content {
			width: 100%;
		}

		.featured .card-content {
			padding: 1.5rem;
		}

		.featured .card-title {
			font-size: 1.5rem;
		}

		.featured .card-description {
			font-size: 1rem;
		}
	}
</style>
